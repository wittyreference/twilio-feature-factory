ts-jest[config] (WARN) [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in "isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
  console.log
    
    === SMS Deep Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:118:17)

  console.log
    From: +12069666002

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:119:17)

  console.log
    To: +12062021014

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:120:17)

  console.log
    
    Message sent: SMe15c19c57058e68c2d82203b211d0f09

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:130:17)

  console.log
    Waiting 5s for message to process...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:137:17)

  console.log
    
    Running deep validation...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:141:17)

  console.log
    
    Resource: message SMe15c19c57058e68c2d82203b211d0f09
    Status: delivered
    Success: false
    Duration: 588ms
    
    Checks:
      âœ“ resourceStatus: Message status: delivered
      âœ“ debuggerAlerts: No alerts found
      âœ— syncCallbacks: No callback data received (Sync document not found)
    
    Errors:
      - No callback data received (Sync document not found)

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:149:17)

  console.error
    
    Validation FAILED

      163 |           expect(validationResult.checks.resourceStatus.passed).toBe(false); // Correctly detected failure
      164 |         } else if (!validationResult.success) {
    > 165 |           console.error('\nValidation FAILED');
          |                   ^
      166 |           console.error('Errors:', validationResult.errors);
      167 |           expect(validationResult.success).toBe(true);
      168 |         } else {

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:165:19)

  console.error
    Errors: [ 'No callback data received (Sync document not found)' ]

      164 |         } else if (!validationResult.success) {
      165 |           console.error('\nValidation FAILED');
    > 166 |           console.error('Errors:', validationResult.errors);
          |                   ^
      167 |           expect(validationResult.success).toBe(true);
      168 |         } else {
      169 |           console.log('\nValidation PASSED âœ“');

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:166:19)

  console.log
    
    === Voice Call Deep Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:182:17)

  console.log
    From: +12069666002

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:183:17)

  console.log
    To: +12062021014

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:184:17)

  console.log
    
    Call initiated: CA52add2439f53340a5ca77431947ef6e7

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:194:17)

  console.log
    Waiting 15s for call to complete...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:201:17)

  console.log
    
    Running deep validation...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:205:17)

  console.log
    
    Resource: call CA52add2439f53340a5ca77431947ef6e7
    Status: failed
    Success: false
    Duration: 959ms
    
    Checks:
      âœ— resourceStatus: Call failed
      âœ“ debuggerAlerts: No alerts found
      âœ“ callNotifications: No call notifications
      âœ“ callEvents: 0 call events, no errors
      âœ“ voiceInsights: Voice Insights not available: The requested resource /v1/Voice/CA52add2439f53340a5ca77431947ef6e7/Summary was not found
      âœ— syncCallbacks: No callback data received (Sync document not found)
    
    Errors:
      - Call failed
      - No callback data received (Sync document not found)

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:213:17)

  console.log
    
    Voice Insights available

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:224:19)

  console.error
    
    Validation FAILED

      226 |
      227 |         if (!validationResult.success) {
    > 228 |           console.error('\nValidation FAILED');
          |                   ^
      229 |           console.error('Errors:', validationResult.errors);
      230 |           // For calls, we expect either completed or the call may not answer
      231 |           // Check if the failure is just no-answer vs actual error

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:228:19)

  console.error
    Errors: [
      'Call failed',
      'No callback data received (Sync document not found)'
    ]

      227 |         if (!validationResult.success) {
      228 |           console.error('\nValidation FAILED');
    > 229 |           console.error('Errors:', validationResult.errors);
          |                   ^
      230 |           // For calls, we expect either completed or the call may not answer
      231 |           // Check if the failure is just no-answer vs actual error
      232 |           const status = validationResult.primaryStatus;

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:229:19)

  console.log
    
    === Verification Deep Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:258:17)

  console.log
    Service: VA0ce73ce077461c8cf828bb5ed2c0d77d

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:259:17)

  console.log
    To: +12062021014

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:260:17)

  console.log
    
    Verification started: VE12acebca4a6e488463b1ca4297812b78

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:270:17)

  console.log
    Waiting 3s for verification to process...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:278:17)

  console.log
    
    Running deep validation...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:282:17)

  console.log
    
    Resource: verification VE12acebca4a6e488463b1ca4297812b78
    Status: pending
    Success: true
    Duration: 380ms
    
    Checks:
      âœ“ resourceStatus: Verification status: pending
      âœ“ debuggerAlerts: No alerts found
      âœ— syncCallbacks: No callback data received (Sync document not found)
    
    Warnings:
      - No callback data received (Sync document not found)

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:292:17)

  console.log
    
    Validation PASSED âœ“

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:305:19)

  console.log
    
    === Full Messaging Workflow Deep Validation ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:318:17)

  console.log
    
    1. Checking account status...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:322:17)

  console.log
       Account: twilio-agent-factory (active)

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:330:17)

  console.log
    
    2. Sending test message...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:333:17)

  console.log
       Sent: SM86d028132b8e963653286c25d609e0ab

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:345:17)

  console.log
    
    3. Waiting for delivery...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:348:17)

  console.log
    
    4. Deep validating message...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:351:17)

  console.log
    
    5. Checking debugger for issues...

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:374:17)

  console.log
    
    === Workflow Summary ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:396:17)

  console.log
    âœ“ Account Check: Account twilio-agent-factory is active

      at __tests__/e2e-deep-validation.test.ts:399:19
          at Array.forEach (<anonymous>)

  console.log
    âœ“ Send Message: SID: SM86d028132b8e963653286c25d609e0ab

      at __tests__/e2e-deep-validation.test.ts:399:19
          at Array.forEach (<anonymous>)

  console.log
    âœ“ Deep Validation: Status: delivered, Checks: resourceStatus:âœ“, debuggerAlerts:âœ“, syncCallbacks:âœ“

      at __tests__/e2e-deep-validation.test.ts:399:19
          at Array.forEach (<anonymous>)

  console.log
    âœ“ Debugger Check: No alerts found

      at __tests__/e2e-deep-validation.test.ts:399:19
          at Array.forEach (<anonymous>)

  console.log
    
    Overall: PASSED âœ“

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:403:17)

  console.log
    
    === Debugger Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:429:15)

  console.log
    Total alerts: 4

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:435:15)

  console.log
    Error alerts: 4

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:436:15)

  console.log
    Warning alerts: 0

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:437:15)

  console.log
    Success: false

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:438:15)

  console.log
    
    Recent alerts:

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:441:17)

  console.log
      [error] 20404: undefined

      at __tests__/e2e-deep-validation.test.ts:443:19
          at Array.forEach (<anonymous>)

  console.log
      [error] 20404: undefined

      at __tests__/e2e-deep-validation.test.ts:443:19
          at Array.forEach (<anonymous>)

  console.log
      [error] 20404: undefined

      at __tests__/e2e-deep-validation.test.ts:443:19
          at Array.forEach (<anonymous>)

  console.log
      [error] 20404: undefined

      at __tests__/e2e-deep-validation.test.ts:443:19
          at Array.forEach (<anonymous>)

  console.log
    
    Debugger Validation PASSED âœ“

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:452:15)

  console.log
    
    === Sync Document Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:495:15)

  console.log
    Service: ISf9c72033b5bb434343243125d6c8ddc9

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:496:15)

  console.log
    Created doc: ET0c8b7eb9ad81536ba004c7851ed5a0a7 (e2e-test-doc-1772229439748)

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:506:15)

  console.log
    Success: true

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:518:15)

  console.log
    Document SID: ET0c8b7eb9ad81536ba004c7851ed5a0a7

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:519:15)

  console.log
    Data keys: count, status, tags

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:520:15)

  console.log
    
    Sync Document Validation PASSED âœ“

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:527:15)

  console.log
    Cleaned up test doc: e2e-test-doc-1772229439748

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:485:17)

  console.log
    
    === Sync List Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:569:15)

  console.log
    Created list: ES95796ff63c3da488f644f91dac9b794c (e2e-test-list-1772229439748)

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:575:15)

  console.log
    Added 3 items

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:584:15)

  console.log
    Success: true

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:597:15)

  console.log
    List SID: ES95796ff63c3da488f644f91dac9b794c

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:598:15)

  console.log
    Item count: 3

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:599:15)

  console.log
    
    Sync List Validation PASSED âœ“

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:604:15)

  console.log
    Cleaned up test list: e2e-test-list-1772229439748

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:559:17)

  console.log
    
    === Sync Map Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:646:15)

  console.log
    Created map: MP8a4978f928548618b2b4181eded14dd2 (e2e-test-map-1772229439748)

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:652:15)

  console.log
    Added 2 map items

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:665:15)

  console.log
    Success: true

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:676:15)

  console.log
    Map SID: MP8a4978f928548618b2b4181eded14dd2

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:677:15)

  console.log
    Item count: 2

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:678:15)

  console.log
    Keys: config, settings

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:679:15)

  console.log
    
    Sync Map Validation PASSED âœ“

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:688:15)

  console.log
    Cleaned up test map: e2e-test-map-1772229439748

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:636:17)

  console.log
    
    === TaskRouter Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:732:15)

  console.log
    Workspace: WSd62067aeefb719e0707be7e3758fd2ff

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:733:15)

  console.log
    No workflows found â€” skipping

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:741:17)

  console.log
    
    === Recording Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:810:15)

  console.log
    Validating recording: REc72ca2df7b2c89e9232bed15e62b9fe1

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:820:15)

  console.log
      Call SID: CAe9040742bd1073d2395c0c545ab61984

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:821:15)

  console.log
      Duration: 5s

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:822:15)

  console.log
      Status: completed

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:823:15)

  console.log
    
    Success: true

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:830:15)

  console.log
    Recording SID: REc72ca2df7b2c89e9232bed15e62b9fe1

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:831:15)

  console.log
    Status: completed

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:832:15)

  console.log
    Duration: 5s

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:833:15)

  console.log
    
    Recording Validation PASSED âœ“

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:838:15)

  console.log
    
    === Transcript Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:861:15)

  console.log
    No completed transcripts found â€” skipping

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:868:17)

  console.log
    
    === Language Operator Validation Test ===

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:913:15)

  console.log
    No completed transcripts found â€” skipping

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:920:17)

FAIL __tests__/e2e-deep-validation.test.ts (40.801 s)
  E2E Deep Validation Tests
    SMS Deep Validation
      âœ• should send SMS and validate delivery via multiple endpoints (6122 ms)
    Voice Call Deep Validation
      âœ“ should make call and validate via Voice Insights and Call Events (16142 ms)
    Verification Deep Validation
      âœ“ should start verification and validate via multiple endpoints (3957 ms)
    Full Workflow Deep Validation
      âœ“ should run complete messaging workflow with validation at each step (6201 ms)
  Standalone Debugger Validation
    âœ“ should check debugger for recent alerts (396 ms)
  Sync Document Validation
    âœ“ should create and validate a Sync Document (759 ms)
  Sync List Validation
    âœ“ should create and validate a Sync List (1330 ms)
  Sync Map Validation
    âœ“ should create and validate a Sync Map (1115 ms)
  TaskRouter Validation
    âœ“ should create and validate a TaskRouter task (539 ms)
  Recording Validation
    âœ“ should validate a recent recording from the account (746 ms)
  Transcript Validation
    âœ“ should validate a recent transcript from the account (469 ms)
  Language Operator Validation
    âœ“ should validate language operator results on a transcript (311 ms)

  â— E2E Deep Validation Tests â€º SMS Deep Validation â€º should send SMS and validate delivery via multiple endpoints

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      165 |           console.error('\nValidation FAILED');
      166 |           console.error('Errors:', validationResult.errors);
    > 167 |           expect(validationResult.success).toBe(true);
          |                                            ^
      168 |         } else {
      169 |           console.log('\nValidation PASSED âœ“');
      170 |           expect(validationResult.checks.resourceStatus.passed).toBe(true);

      at Object.<anonymous> (__tests__/e2e-deep-validation.test.ts:167:44)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 11 passed, 12 total
Snapshots:   0 total
Time:        40.925 s
Ran all test suites matching /e2e-deep-validation/i.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
